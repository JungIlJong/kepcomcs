<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kepco.app.domain.progrm.mapper.ProgrmSysMapper">

	<!-- 프로그램 목록 정보를 조회한다. -->
	<select id="selectProgrmList" parameterType="HashMap" resultType="progrm">
		SELECT PROGRM_ID, PROGRM_NM, PROGRM_DC, PROGRM_URL
		FROM VST_PROGRM
		WHERE 1 = 1
		<if test="searchKeyword != null and searchKeyword != ''">
			AND (PROGRM_NM LIKE CONCAT('%', #{searchKeyword}, '%') OR
			PROGRM_DC LIKE CONCAT('%', #{searchKeyword}, '%') OR
			PROGRM_URL LIKE CONCAT('%', #{searchKeyword}, '%'))
		</if>
		ORDER BY
		<choose>
			<when test="orderColumn != null and orderColumn != ''">
				${orderColumn}
			</when>
			<otherwise>
				PROGRM_ID
			</otherwise>
		</choose>
		<choose>
			<when test="ascDesc != null and ascDesc != ''">
				${ascDesc}
			</when>
			<otherwise>
				DESC
			</otherwise>
		</choose>
		LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
	</select>

	<!-- 프로그램 총 갯수를 조회한다. -->
	<select id="selectProgrmListTotCnt" parameterType="HashMap" resultType="int">
		SELECT COUNT(*) totCnt
		FROM VST_PROGRM
		WHERE 1 = 1
		<if test="searchKeyword != null and searchKeyword != ''">
			AND (PROGRM_NM LIKE CONCAT('%', #{searchKeyword}, '%') OR
			PROGRM_DC LIKE CONCAT('%', #{searchKeyword}, '%') OR
			PROGRM_URL LIKE CONCAT('%', #{searchKeyword}, '%'))
		</if>
	</select>

	<!-- 프로그램 상세 정보를 조회한다. -->
	<select id="selectProgrmDetail" parameterType="String" resultType="progrm">
		SELECT PROGRM_ID, PROGRM_NM, PROGRM_DC, PROGRM_URL
		FROM VST_PROGRM
		WHERE PROGRM_ID = #{progrmId}
	</select>

	<!-- 프로그램 정보를 등록한다. -->
	<insert id="insertProgrm" parameterType="progrm">
			INSERT INTO VST_PROGRM (PROGRM_NM, PROGRM_DC, PROGRM_URL, FRST_REGISTER_ID, FRST_REGIST_DT)
			VALUES (#{progrmNm}, #{progrmDc}, #{progrmUrl}, #{frstRegisterId}, NOW())
	</insert>

	<!-- 프로그램 정보를 수정한다. -->
	<update id="updateProgrm" parameterType="progrm">
		UPDATE VST_PROGRM
		SET PROGRM_NM = #{progrmNm},
		    PROGRM_DC = #{progrmDc},
		    PROGRM_URL = #{progrmUrl},
			LAST_UPDUSR_ID = #{lastUpdusrId},
			LAST_UPDT_DT = NOW()
		WHERE PROGRM_ID = #{progrmId}
	</update>

	<!-- 프로그램 정보를 삭제한다. -->
	<delete id="deleteProgrm" parameterType="String">
		DELETE FROM VST_PROGRM
		WHERE PROGRM_ID = #{progrmId}
	</delete>

</mapper>